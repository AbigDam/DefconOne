{% extends "AWSDefcon1App/layout.html" %}

{% block body %}

<h1>Welcome to <span>Defcon1</span></h1>

<p>Defcon1, an online multiplayer strategy game set in 1936</p>
<p>New here? Click the <strong>‚ùî</strong> button in the bottom-right corner at any time to open the tutorial.</p>
<p>Log in or Register below to begin your gaming experience</p>

<div class="button-row">
    <a href="{% url 'login' %}" class="wel_button">Log In</a>
    <a href="{% url 'register' %}" class="wel_button">Register</a>
</div>

<p>Not ready to make an account? <strong>Singleplayer</strong> doesn't require one! Play below and create an account later for multiplayer.</p>

<div class="button-row">
    <a href="{% url 'start_guest_game' %}" class="wel_button">Single Player</a>
</div>

<p>Here are some gameplay GIFs. It may help to look at these before playing!</p>

<div class="slideshow-wrapper">
    <div class="slideshow">
        <button class="arrow left" onclick="prevSlide()">&#10094;</button>

        <img src="/static/AWSDefcon1App/T-DeclareWar.gif" class="active">
        <img src="/static/AWSDefcon1App/T-GroundAttack.gif">
        <img src="/static/AWSDefcon1App/T-BuyDivisions.gif">

        <button class="arrow right" onclick="nextSlide()">&#10095;</button>
    </div>

    <div class="caption-row">
        <h3 id="caption" class="caption"></h3>
        <div class="info-bubble">
            <span class="info-icon">üõà</span>
            <span id="tooltip-txt" class="tooltip-text">Caption text associated with each image</span>
        </div>
    </div>
</div>

<div class="tutorial-widget">
    <input type="checkbox" id="tutorial-toggle" hidden>
    <label for="tutorial-toggle" class="tutorial-button">‚ùî</label>
    <div class="tutorial-content">
        <h4>How to Play</h4>
        <p>
            Welcome!<br>
            This is where you can get tutorial information throughout your gaming journey.<br>
            Enjoy!
        </p>
    </div>
</div>

<script>
let currentIndex = 0;
const slides = document.querySelectorAll(".slideshow img");

const captions = [
    "Declaring war",
    "Launching a ground attack",
    "Buying armies"
];

const tooltips = [
    "The United States is declaring war on Mexico by first clicking Mexico on the map, and then clicking Declare War",
    "The United States is attacking Mexico. They select 'Military' then the number of armies, then click 'Ground Attack'. Each army can only be used once per turn!",
    "The United States is buying armies by clicking 'Buy Supplies' and then selecting the Gun to pick armies. Purchased armies are usable next turn. Each turn gives 1 point."
];

const captionEl = document.getElementById("caption");
const tooltipEl = document.getElementById("tooltip-txt");

function showSlide(index) {
    slides.forEach(slide => slide.classList.remove("active"));
    slides[index].classList.add("active");
    captionEl.textContent = captions[index];
    tooltipEl.textContent = tooltips[index];
}

function nextSlide() {
    currentIndex = (currentIndex + 1) % slides.length;
    showSlide(currentIndex);
}

function prevSlide() {
    currentIndex = (currentIndex - 1 + slides.length) % slides.length;
    showSlide(currentIndex);
}

// initialize slideshow
showSlide(currentIndex);
</script>
<style>
/* Body and general text */
body {
    margin: 0;
    padding: 2rem;
    background-color: #121212;
    color: #e0e0e0;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    display: flex;
    flex-direction: column;
    align-items: center;
    min-height: 100vh;
    line-height: 1.6;
}

/* Headings */
h1 {
    text-align: center;
    font-size: 2.5em;
}
h1 span {
    color: red;
}

/* Paragraphs */
p {
    font-size: 1.2em;
    max-width: 800px;
    margin: 1em auto;
    text-align: center;
}

/* Buttons */
.wel_button {
    display: inline-block;
    background: #0af;
    color: #000;
    padding: 0.8em 2em;
    border: none;
    border-radius: 10px;
    margin: 0.5em 1em;
    font-size: 1.1em;
    text-decoration: none;
    text-align: center;
    cursor: pointer;
    transition: background 0.3s, transform 0.15s;
}
.wel_button:hover {
    background: #08c;
    transform: scale(1.05);
    text-decoration: none;
    color: black;
}

/* Button containers */
.button-row {
    display: flex;
    justify-content: center;
    flex-wrap: wrap;
    margin-bottom: 2rem;
}

/* Slideshow container */
.slideshow-wrapper {
    display: flex;
    flex-direction: column;
    align-items: center;
    margin: 2rem 0;
}

.slideshow {
    position: relative;
    width: 1000px;
    max-width: 100%;
    height: 600px;
    background: #000;
    border-radius: 10px;
    overflow: hidden;
}

.slideshow img {
    width: 100%;
    height: 100%;
    object-fit: contain;
    display: none;
}
.slideshow img.active {
    display: block;
}

/* Arrows */
.arrow {
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    background: rgba(0,0,0,0.6);
    color: white;
    border: none;
    font-size: 2em;
    padding: 0.5em 1em;
    cursor: pointer;
}
.arrow:hover {
    background: rgba(0,0,0,0.8);
}
.arrow.left { left: 10px; }
.arrow.right { right: 10px; }

/* Captions and tooltips */
.caption-row {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 10px;
    margin-top: 0.5rem;
}
.caption {
    font-size: 1.2em;
    margin: 0;
    color: #fff;
}

/* Tutorial widget */
.tutorial-widget {
    position: fixed;
    bottom: 1rem;
    right: 1rem;
}
.tutorial-button {
    font-size: 1.8em;
    cursor: pointer;
    color: #0af;
}
.tutorial-content {
    display: none;
    position: absolute;
    bottom: 2.5rem;
    right: 0;
    background: #1e1e1e;
    color: #e0e0e0;
    padding: 1rem 1.5rem;
    border-radius: 10px;
    width: 300px;
    box-shadow: 0 0 15px rgba(0,0,0,0.5);
}
#tutorial-toggle:checked + .tutorial-button + .tutorial-content {
    display: block;
}
</style>
{% endblock %}
