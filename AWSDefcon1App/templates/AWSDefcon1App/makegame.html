{% extends "AWSDefcon1App/layout.html" %}

{% block title %}
Configure Player Slots
{% endblock %}

{% block body %}
<style>
    body {
        background-color: #121212;
        color: #e0e0e0;
        font-family: 'Segoe UI', 'Roboto', sans-serif;
        margin: 0;
        padding: 0;
    }

    .form-container {
        max-width: 760px;
        margin: 50px auto;
        padding: 30px;
        background-color: #1e1e1e;
        border-radius: 12px;
        box-shadow: 0 0 20px rgba(0,0,0,0.5);
    }

    h2 {
        text-align: center;
        font-size: 1.9em;
        margin-bottom: 10px;
        color: #90caf9;
    }

    .subtitle {
        text-align: center;
        font-size: 1.05em;
        color: #bbbbbb;
        margin-bottom: 25px;
    }

    .section-title {
        margin-top: 35px;
        font-size: 1.3em;
        color: #ffffff;
        border-bottom: 1px solid #444;
        padding-bottom: 6px;
    }

    .section-description {
        margin-top: 10px;
        font-size: 0.95em;
        color: #aaaaaa;
    }

    .checkbox-group {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: 18px;
        margin-top: 25px;
    }

    .checkbox-item {
        font-size: 1.15em;
        display: flex;
        align-items: center;
        color: #dddddd;
        background-color: #252525;
        padding: 12px 14px;
        border-radius: 8px;
        cursor: pointer;
        transition: background-color 0.2s ease;
    }

    .checkbox-item:hover {
        background-color: #2e2e2e;
    }

    .checkbox-item input[type="checkbox"] {
        transform: scale(1.4);
        margin-right: 12px;
        cursor: pointer;
    }

    .submit-section {
        text-align: center;
        margin-top: 40px;
    }

    button.attacker {
        background-color: #2196f3;
        color: white;
        padding: 14px 36px;
        font-size: 1.25em;
        border: none;
        border-radius: 10px;
        cursor: pointer;
        transition: background-color 0.3s ease, transform 0.2s ease;
    }

    button.attacker:hover {
        background-color: #1976d2;
        transform: scale(1.05);
    }

    .legend {
        margin-top: 20px;
        font-size: 0.9em;
        color: #9e9e9e;
        text-align: center;
    }
</style>

<div class="form-container">
    <h2>Nation Configuration</h2>
    <div class="subtitle">
        Choose which nations are <strong>open for human players</strong>.<br>
        Any nation <strong>not selected</strong> will be controlled by the <strong>AI</strong>.<br>
        Select <strong>one nation</strong> for single player
    </div>

    <p style="text-align:center;">{{ Message }}</p>

    <form method="POST" action="{% url 'makegame' game_id=game_id %}">
        {% csrf_token %}

        <div class="section-description">
            Each checked nation becomes an available slot that a real player can join.
            Leaving a nation unchecked assigns it an AI controller.
        </div>

<div class="checkbox-group">
    <label class="checkbox-item">
        <input type="checkbox" name="countries" value="UK">
        ğŸ‡¬ğŸ‡§ United Kingdom
    </label>

    <label class="checkbox-item">
        <input type="checkbox" name="countries" value="USA">
        ğŸ‡ºğŸ‡¸ United States
    </label>

    <label class="checkbox-item">
        <input type="checkbox" name="countries" value="France">
        ğŸ‡«ğŸ‡· France
    </label>

    <label class="checkbox-item">
        <input type="checkbox" name="countries" value="Germany">
        ğŸ‡©ğŸ‡ª Germany
    </label>

    <label class="checkbox-item">
        <input type="checkbox" name="countries" value="USSR">
        â˜­ Soviet Union (USSR)
    </label>

    <label class="checkbox-item">
        <input type="checkbox" name="countries" value="Italy">
        ğŸ‡®ğŸ‡¹ Italy
    </label>

    <label class="checkbox-item">
        <input type="checkbox" name="countries" value="Japan">
        ğŸ‡¯ğŸ‡µ Japan
    </label>

    <label class="checkbox-item">
        <input type="checkbox" name="countries" value="China">
        ğŸ‡¹ğŸ‡¼ China
    </label>

    <label class="checkbox-item">
        <input type="checkbox" name="countries" value="PRC">
        ğŸ‡¨ğŸ‡³ Communist China
    </label>

    <label class="checkbox-item">
        <input type="checkbox" name="countries" value="Brazil">
        ğŸ‡§ğŸ‡· Brazil
    </label>

    <label class="checkbox-item">
        <input type="checkbox" name="countries" value="Cuba">
        ğŸ‡¨ğŸ‡º Cuba
    </label>

    <label class="checkbox-item">
        <input type="checkbox" name="countries" value="Other">
        ğŸŒ All Other Minor Nations (AI if unchecked)
    </label>
</div>

        <div class="legend">
            âœ” Checked = Open for players &nbsp;&nbsp;|&nbsp;&nbsp; â–«ï¸ Unchecked = AI-controlled
        </div>

        <div class="submit-section">
            <button class="attacker" type="submit">
                Create Lobby
            </button>
        </div>
    </form>

    <div class="subtitle">
        <br> Not looking to make a new lobby? <br>
        Search for open lobies <a href = "{% url 'full_index' %}">here</a>
    </div>

</div>

<script>
    document.addEventListener('DOMContentLoaded', () => {
        const gifPath = '/static/AWSDefcon1App/justWait.gif';
        const gifContainer = document.createElement('div');
        const gifImage = document.createElement('img');

        gifContainer.style.position = 'fixed';
        gifContainer.style.top = '0';
        gifContainer.style.left = '0';
        gifContainer.style.width = '100%';
        gifContainer.style.height = '100%';
        gifContainer.style.backgroundColor = 'rgba(0, 0, 0, 0.8)';
        gifContainer.style.display = 'none';
        gifContainer.style.justifyContent = 'center';
        gifContainer.style.alignItems = 'center';
        gifContainer.style.zIndex = '9999';

        gifImage.src = gifPath;
        gifImage.style.maxWidth = '90%';
        gifImage.style.maxHeight = '90%';

        gifContainer.appendChild(gifImage);
        document.body.appendChild(gifContainer);

        document.addEventListener('click', (event) => {
            if (event.target.closest('button.attacker')) {
                gifContainer.style.display = 'flex';
                setTimeout(() => {
                    gifContainer.style.display = 'none';
                }, 20000);
            }
        });
    });
</script>

<div class="tutorial-widget">
    <input type="checkbox" id="tutorial-toggle" hidden>
    <label for="tutorial-toggle" class="tutorial-button">â”</label>
    <div class="tutorial-content">
        <h4>Lobby Setup Tips</h4>
        <p>
            â€¢ You are deciding which nations are controlled by humans.<br><br>
            â€¢ For a solo tutorial, open only one nation (Japan is recommended).<br><br>
            â€¢ For multiplayer, coordinate with friends before opening slots.<br><br>
            â€¢ Leaving powerful nations unchecked (e.g. USSR) can help balance games.<br><br>
            Unselected nations will always be AI-controlled.
        </p>
    </div>
</div>
{% endblock %}
